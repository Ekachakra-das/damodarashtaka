<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="theme-color" content="#fffdee">
        <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
        <meta name="apple-mobile-web-app-title" content="Damodara">
        <title>Damodarāṣṭakam</title>
        <meta name="description" content="Experience the Damodarāṣṭakam prayer with Sanskrit text, word-by-word analysis, English, Russian, Italian and upcoming multi-language translations. Offline-capable PWA for spiritual practice.">
        <meta name="keywords" content="Damodarāṣṭakam, Damodara, Krishna, Vaishnava prayer, Sanskrit, Hindu prayer, spiritual app, offline prayer, Kartika month, Padma Purana, multi-language, translations">
        <meta name="author" content="Damodarāṣṭakam App">
        <meta name="robots" content="index, follow">
        <link rel="canonical" href="https://damodarashtakam.laulyam.com/">
        <link rel="preload" as="image" href="https://img.icons8.com/?size=100&id=zPsDwZeiXsyW&format=png&color=000000" crossorigin="anonymous">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://damodarashtakam.laulyam.com/">
        <meta property="og:title" content="Damodarāṣṭakam - Vaishnava Prayer App">
        <meta property="og:description" content="Damodarāṣṭakam prayer with Sanskrit text, detailed multi-language translations, and offline functionality. Perfect for spiritual practice.">
        <meta property="og:image" content="https://damodarashtakam.laulyam.com/favicon/icon-512.png">

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:url" content="https://damodarashtakam.laulyam.com/">
        <meta name="twitter:title" content="Damodarāṣṭakam - Vaishnava Prayer App">
        <meta name="twitter:description" content="Experience the Damodarāṣṭakam prayer with Sanskrit text and multi-language translations. Offline-capable PWA.">
        <meta name="twitter:image" content="https://damodarashtakam.laulyam.com/favicon/icon-512.png">

        <link rel="manifest" href="manifest.json">
        <link rel="icon" href="favicon/favicon.ico" sizes="any">
        <link rel="apple-touch-icon" href="favicon/apple-touch-icon.png">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="dark-mode.css">
        
        <!-- PWA Theme Switcher Script -->
        <script>
        (function() {
            // Get saved theme preference or default to 'auto'
            const savedTheme = localStorage.getItem('damodarashtakam-theme') || 'auto';
            
            function updatePWATheme(isDark) {
                // Update manifest link for browsers that don't support media queries on manifest
                const manifestLink = document.querySelector('link[rel="manifest"]');
                if (manifestLink) {
                    const newHref = isDark ? 'manifest-dark.json' : 'manifest.json';
                    if (manifestLink.href !== newHref) {
                        manifestLink.href = newHref;
                    }
                }
                
                // Update theme-color for browsers that don't support media queries on meta tags
                const themeColorMeta = document.querySelector('meta[name="theme-color"]:not([media])');
                if (themeColorMeta) {
                    const newColor = isDark ? '#0f172a' : '#fffdee';
                    if (themeColorMeta.content !== newColor) {
                        themeColorMeta.content = newColor;
                        // Force browser to recognize the change
                        themeColorMeta.setAttribute('content', newColor);
                    }
                }
            }
            
            // Determine if dark theme should be active
            function shouldUseDarkTheme() {
                if (savedTheme === 'dark') return true;
                if (savedTheme === 'light') return false;
                // Auto mode - follow system preference
                return window.matchMedia('(prefers-color-scheme: dark)').matches;
            }
            
            // Initial theme setup
            updatePWATheme(shouldUseDarkTheme());
            
            // Listen for system color scheme changes (only affects auto mode)
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                const currentTheme = localStorage.getItem('damodarashtakam-theme') || 'auto';
                if (currentTheme === 'auto') {
                    updatePWATheme(e.matches);
                }
            });
            
            // Listen for manual theme changes
            window.addEventListener('storage', (e) => {
                if (e.key === 'damodarashtakam-theme') {
                    updatePWATheme(shouldUseDarkTheme());
                }
            });
            
            // Expose function for manual theme updates
            window.updatePWAThemeColors = function() {
                const isDark = shouldUseDarkTheme();
                updatePWATheme(isDark);
                
                // Force update by recreating the theme-color meta tag
                const existingMeta = document.querySelector('meta[name="theme-color"]:not([media])');
                if (existingMeta) {
                    const newMeta = document.createElement('meta');
                    newMeta.name = 'theme-color';
                    newMeta.content = isDark ? '#0f172a' : '#fffdee';
                    existingMeta.parentNode.replaceChild(newMeta, existingMeta);
                }
            };
        })();
        </script>
        
        <script src="https://cdn.counter.dev/script.js" data-id="7e80dc4f-60e5-4612-9e5f-6011039aabce" data-utcoffset="3"></script>

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "CreativeWork",
            "name": "Damodarāṣṭakam",
            "description": "Vaishnava prayer from Padma Purana, featuring Sanskrit text with word-by-word analysis, English, Russian and upcoming multi-language translations",
            "author": {
                "@type": "Person",
                "name": "Satyavrata Muni"
            },
            "publisher": {
                "@type": "Organization",
                "name": "Padma Purana"
            },
            "genre": "Religious Text",
            "inLanguage": ["sa", "en", "ru", "it"],
            "url": "https://damodarashtakam.laulyam.com/",
            "image": "https://damodarashtakam.laulyam.com/favicon/icon-512.png",
            "applicationCategory": "LifestyleApplication",
            "operatingSystem": "Web Browser",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "USD"
            }
        }
        </script>
</head>
<body>
    <div class="header-section">
        <div id="hamburger-menu">☰</div>
        <h1>
            <span data-i18n="title">Damodarāṣṭakam</span>
        </h1>

        <div class="damodara-description">
            <div class="damodara-desc-source">
                <span data-i18n="description.source">Found in the Padma Purana of Krishna Dvaipayana Vyasa,<br>
                spoken by Satyavrata Muni in a conversation with Narada Muni and Saunaka Rishi.</span>
            </div>
            <div class="damodara-desc-quote">
                <span data-i18n="description.quote">"In the month of Kartika one should worship Lord Damodara and daily recite the prayer known
                as Damodarashtaka, which has been spoken by the sage Satyavrata and which attracts Lord Damodara."</span><br>
                <span class="damodara-desc-ref" data-i18n="description.reference">(Sri Hari-bhakti-vilasa 2.16.198)</span>
            </div>
        </div>

        <div class="damodara-slider">
            <img src="img/1 Large.jpeg" class="damodara-slide active" alt="Damodara 1">
            <img src="img/2 Large.jpeg" class="damodara-slide" alt="Damodara 2">
            <img src="img/3 Large.jpeg" class="damodara-slide" alt="Damodara 3">
        </div>
        <div class="damodara-audio-btn">
            <button id="play-audio" class="audio-play-btn">
                <span class="play-icon" aria-hidden="true" style="display:inline-block;vertical-align:middle;">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="9" cy="9" r="9" fill="#007aff"/>
                        <polygon points="7,6 13,9 7,12" fill="#fff"/>
                    </svg>
                </span>
                <span data-i18n="audio.playButton">Play Damodarashtakam</span>
            </button>
        </div>
        <div class="damodara-audio" id="damodara-audio" style="display:none;">
            <audio controls>
                <source src="https://ia801306.us.archive.org/15/items/AindraPrabhu-Damodarashtakam/aindra_prabhu_damodarashtakam.mp3" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
            
        </div>
    </div>

    <div class="font-controls" style="text-align: center; margin: 40px 0;">
        <button id="font-minus">A-</button>
        <button id="font-default">A</button>
        <button id="font-plus">A+</button>
    </div>

    <div id="verses"></div>

    <script src="script.js"></script>
</body>
</html>
